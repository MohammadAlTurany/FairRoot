#!/bin/bash

if(@NANOMSG_FOUND@); then
    buffSize="50000000" # nanomsg buffer size is in bytes
else
    buffSize="1000" # zeromq high-water mark is in messages
fi

ID="101"
eventSize="1000"
numIoThreads="1"
numOutputs="3"
heartbeatTimeoutInMs="20000"
inputSocketType="sub"
inputBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5580"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5560"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5561"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5562"
xterm -e @CMAKE_BINARY_DIR@/bin/testFLP_dynamic $ID $eventSize $numIoThreads $numOutputs $heartbeatTimeoutInMs $inputSocketType $inputBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &

ID="102"
eventSize="1000"
numIoThreads="1"
numOutputs="3"
heartbeatTimeoutInMs="20000"
inputSocketType="sub"
inputBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5581"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5560"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5561"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5562"
xterm -e @CMAKE_BINARY_DIR@/bin/testFLP_dynamic $ID $eventSize $numIoThreads $numOutputs $heartbeatTimeoutInMs $inputSocketType $inputBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &

ID="103"
eventSize="1000"
numIoThreads="1"
numOutputs="3"
heartbeatTimeoutInMs="20000"
inputSocketType="sub"
inputBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5582"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5560"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5561"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5562"
xterm -e @CMAKE_BINARY_DIR@/bin/testFLP_dynamic $ID $eventSize $numIoThreads $numOutputs $heartbeatTimeoutInMs $inputSocketType $inputBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &

ID="201"
numIoThreads="1"
numOutputs="3"
heartbeatIntervalInMs="5000"
inputSocketType="sub"
inputRcvBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5560"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5580"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5581"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5582"
xterm -e @CMAKE_BINARY_DIR@/bin/testEPN_dynamic $ID $numIoThreads $numOutputs $heartbeatIntervalInMs $inputSocketType $inputRcvBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &

ID="202"
numIoThreads="1"
numOutputs="3"
heartbeatIntervalInMs="5000"
inputSocketType="sub"
inputRcvBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5561"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5580"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5581"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5582"
xterm -e @CMAKE_BINARY_DIR@/bin/testEPN_dynamic $ID $numIoThreads $numOutputs $heartbeatIntervalInMs $inputSocketType $inputRcvBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &

ID="203"
numIoThreads="1"
numOutputs="3"
heartbeatIntervalInMs="5000"
inputSocketType="sub"
inputRcvBufSize=$buffSize
inputMethod="bind"
inputAddress="tcp://127.0.0.1:5562"
outputSocketType1="pub"
outputBufSize1=$buffSize
outputMethod1="connect"
outputAddress1="tcp://127.0.0.1:5580"
outputSocketType2="pub"
outputBufSize2=$buffSize
outputMethod2="connect"
outputAddress2="tcp://127.0.0.1:5581"
outputSocketType3="pub"
outputBufSize3=$buffSize
outputMethod3="connect"
outputAddress3="tcp://127.0.0.1:5582"
xterm -e @CMAKE_BINARY_DIR@/bin/testEPN_dynamic $ID $numIoThreads $numOutputs $heartbeatIntervalInMs $inputSocketType $inputRcvBufSize $inputMethod $inputAddress $outputSocketType1 $outputBufSize1 $outputMethod1 $outputAddress1 $outputSocketType2 $outputBufSize2 $outputMethod2 $outputAddress2 $outputSocketType3 $outputBufSize3 $outputMethod3 $outputAddress3 &
